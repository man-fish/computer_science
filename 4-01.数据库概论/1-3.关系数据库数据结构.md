## 概述

提出关系模型的是美国IBM公司的E.F.Codd：

- 1970年提出关系数据模型
  - E.F.Codd, ―A Relational Model of Data for Large Shared Data Banks‖
- 之后，提出了关系代数和关系演算的概念
- 1972年提出了关系的第一、第二、第三范式
- 1974年提出了关系的BC范式

## 关系

单一的数据结构----关系：现实世界的实体以及实体间的各种联系均用关系来表示

逻辑结构----二维表：从用户角度，关系模型中数据的逻辑结构是一张二维表

建立在集合代数的基础上

### 域（Domain）

域是一组具有相同数据类型的值的集合：

例：整数，实数，介于某个取值范围的整数，指定长度的字符串集合，{‘男’，‘女’}

### 笛卡尔积（Cartesian Product）

给定一组域D1，D2，…，Dn，允 许 其 中 某 些 域 是 相 同的，D1，D2，…，Dn 的笛卡尔积为：
$$
D1×D2×…×Dn＝｛（d1，d2，…，dn）｜di ∈ Di，i＝1，2，…，n｝
$$

1. 所有域的所有取值的一个组合

2. 不能重复

###### 元组（Tuple）

笛卡尔积中每一个元素（d1，d2，…，dn）叫作一个n元组（n-tuple）或简称元组。笛卡尔积的表示方法

###### 分量（Component）

笛卡尔积元素（d1，d2，…，dn）中的每一个值di叫作一个分量

张清玫、计算机专业、李勇、刘晨等都是分量

###### 基数（Cardinal number）

若Di（i＝1，2，…，n）为有限集，其基数为mi（i＝1，2，…，n），则D1×D2×…×Dn的基数M为：
$$
M = m1+...+mn
$$
笛卡尔积的表示方法：

- 笛卡尔积可表示为一张二维表。

- 表中的每行对应一个元组，表中的每列对应一个域。

##### Example：

**例如，给出3个域：**

D1=导师集合SUPERVISOR=｛张清玫，刘逸｝

D2=专业集合SPECIALITY=｛计算机专业，信息专业｝

D3=研究生集合POSTGRADUATE=｛李勇，刘晨，王敏｝

**D1，D2，D3的笛卡尔积为：**

D1×D2×D3＝{(张清玫，计算机专业，李勇)，(张清玫，计算机专业，刘晨)，(张清玫，计算机专业，王敏)，(张清玫，信息专业，李勇)，(张清玫，信息专业，刘晨)，(张清玫，信息专业，王敏)，(刘逸，计算机专业，李勇)，(刘逸，计算机专业，刘晨)，(刘逸，计算机专业，王敏)，(刘逸，信息专业，李勇)，(刘逸，信息专业，刘晨)，(刘逸，信息专业，王敏) }

**基数：**

基数为2×2×3＝12

### 关系（Relation）

D1×D2×…×Dn的子集叫作在域D1，D2，…，Dn上的关系，表示为R（D1，D2，…，Dn）

- R：关系名

- n：关系的目或度（Degree）

###### 元组

关系中的每个元素是关系中的元组，通常用t表示。

###### 单元关系与二元关系

当n=1时，称该关系为单元关系（Unary relation）或一元关系

当n=2时，称该关系为二元关系（Binary relation）

###### 关系的表示

关系也是一个二维表，表的每行对应一个元组，表的每列对应一个域

###### 属性

关系中不同列可以对应相同的域，为了加以区分，必须对每列起一个名字，称为属性（Attribute）

- n目关系必有n个属性

###### 码

- 候选码（Candidate key）：
  - 若关系中的某一属性组的值能唯一地标识一个元组，称该属性组为候选码简单的情况：候选码只包含一个属性

- 全码（All-key）：
  - 最极端的情况：关系模式的所有属性组是这个关系模式的候选码，称为全码（All-key）。

###### 主码

若一个关系有多个候选码，则选定其中一个为主码（Primary key）。

###### 主属性

候选码的诸属性称为主属性（Prime attribute）

不包含在任何侯选码中的属性称为非主属性（Non-Primeattribute）或非码属性（Non-key attribute）

##### Example：

D1，D2，…，Dn的笛卡尔积的某个子集才有实际含义，还是刚才的笛卡尔积：

- 关系：SAP(SUPERVISOR，SPECIALITY，POSTGRADUATE)
- 假设：导师与专业：n:1，    导师与研究生：1:n
- 主码：POSTGRADUATE（假设研究生不会重名）

| **SUPERVISOR** | **SPECIALITY** | **POSTGRADUATE** |
| -------------- | -------------- | ---------------- |
| 张清玫         | 计算机专业     | 李勇             |
| 张清玫         | 计算机专业     | 刘晨             |
| 刘逸           | 信息专业       | 王敏             |

###### 基本关系的性质：

1. 列是同质的（Homogeneous）
2. 不同的列可出自同一个域
   1. 其中的每一列称为一个属性
   2. 不同的属性要给予不同的属性名

3. 列的顺序无所谓，列的次序可以任意交换
4. 任意两个元组的候选码不能相同
5. 行的顺序无所谓，行的次序可以任意交换
6. 分量必须取原子值

| **SUPERVISOR** | **SPECIALITY** | **POSTGRADUATE** |      |
| -------------- | -------------- | ---------------- | ---- |
|                  |      | **PG1**        | **PG2**        |
| 张清玫         | 计算机专业     | 李勇             | 刘晨 |
| 刘逸           | 信息专业       | 王敏             |      |

## 关系模式

### 什么是关系模式

关系模式（Relation Schema）是型，关系是值。

关系模式是对关系的描述：

- 元组集合的结构
  - 属性构成
  - 属性来自的域
  - 属性与域之间的映象关系

- 完整性约束条件

### 定义关系模式

关系模式可以形式化地表示为：R（U，D，DOM，F）
- R：关系名
- U：组成该关系的属性名集合
- D：U中属性所来自的域
- DOM：属性向域的映象集合
- F：属性间数据的依赖关系的集合

关系模式通常可以简记为 R (U) 或 R (A1，A2，…，An)：

- R: 关系名
- A1，A2，…，An : 属性名

> 注：域名及属性向域的映象常常直接说明为属性的类型、长度。

### 总结

###### 关系模式：

对关系的描述，静态的、稳定的

> 恕我直言就是`所有字段以及字段描述和取值范围的集合的集合`。

**关系:**

关系模式在某一时刻的状态或内容，动态的、随时间不断变化的

> 恕我直言就是`表中的所有列的集合`。

关系模式和关系往往笼统称为关系，关系和实际表不同的地方主要有两点：

- 关系中的取值范围在表中通常是没有明确规定的，我们只是通过变量类型来规定大概的范围。
- 同时每一个域也不是明确规定的，只是一个约定。

