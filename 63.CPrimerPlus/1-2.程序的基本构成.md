## C程序结构

我们以上面这段代码为例来分析一下c语言的程序构成。

```c
#include <stdio.h>

int main()
{
	int num = 1;
	printf("i am a simple");
	printf(" computer.\n");
	printf("My favorite number is %d because it is first.\n", num);
	return 0;
}
```

### 1.#include指令和头文件

#include 的作用相当于把stdio.h文件中的所有内容都输入该行所在的位置。

```go
#include <stdio.h>
```

实际上，这是一种“拷贝-粘贴”的操作。include文件提供了一种方便的途径共享许多程序共有的信息。 #include这行代码是一条C预处理器指令(preprocessor directive)。对应第一章C语言的编译过程中，C编译器在编译前会对源代码做一些准备工作，即通过cpp预处理 (preprocessing)源代码。

#### 2.main()函数

main是一个极其普通的名称，但是这是唯一的选择。C程序一定从main()函数开始执行(目前不必考虑例外的情况)。除了main()函数，你可以任意命名其他函数，而且 main()函数必须是开始的函数。圆括号有什么功能？用于识别main()是一个函数。很快你将学到更多的函数。就目前而言，只需记住函数是C程序的基本模块。 int是main()函数的返回类型。这表明main()函数返回的值是整数。返回到哪里？返回给操作系统。

通常，函数名后面的圆括号中包含一些传入函数的信息。该例中没有传递任何信息。因此，圆括号内是单词void。

如果浏览旧式的C代码，会发现程序以如下形式开始：

```c
main()
```

C90标准勉强接受这种形式，但是C99和C11标准不允许这样写。因此，即使你使用的编译器允许，也不要这样写。

#### 3.注释

在程序中，被/\*   \*/ 两个符号括起来的部分是程序的注释。写注释能让他人(包括自己)更容易明白你所写的程序。C 语言注释的好处之一是，可将注释放在任意的地方，甚至是与要解释的内容在同一行。较长的注释可单独 放一行或多行。

C99新增了另一种风格的注释。这种新风格使用// 符号创建注释，仅限于单行。 // 这种注释只能写成一行。 

#### 4.花括号、函数体和块

花括号还可用于把函数中的多条语句合并为一个单元或块。这点在golang中被继续沿用并且拓展。

#### 5.声明

这行代码叫作声明(declaration)。声明是C语言最重要的特性之一。在该例中，声明完成了两件事。其一，在函数中有一个名为num的变量(variable)。其二，int表明num是一个整数。int是一种数据类型。编译器使用这些信息为num变量在内存中分配存储空间，在声明的同时储存空间就已经在虚拟内存中被开辟了。

```c
int main()
{
  int doors;
  int dogs;
  doors = 5;
  dogs = 3;
  // 其他语句
}
```

以前的C语言，还要求把变量声明在块的顶部，其他语句不能在任何声明的前面，这也算是一种编码风格，在golang中也经常被使用。

##### 命名

给变量命名时要使用有意义的变量名或标识符，C99和C11允许使用更长的标识符名，但是编译器只识别前63个字符。可以用小写字母、大写字母、数字和下划线（_）来命名。而且，名称的第1个字符必须是字符或下划线，不能是数字。

#### 6.赋值

程序清单中的这行代码是赋值表达式语句。赋值是C语言的基本操作之一。

```c
num = 1; 
```

该行代码的意思是“把值1赋给变量num”。在执行num声明时，编译器在计算机内存中为变量num预留了空间，然后在执行这行赋值表达式语句时，把值储存在之前预留的位置。可以给num赋不同的值，这就是num之所以被称为变量(variable)的原因。

#### 7.return语句

int main(void)中的int表明 main()函数应返回一个整数。C标准要求main()这样做。有返回值的C函数要 有return语句。该语句以return关键字开始，后面是待返回的值，并以分号结尾。

```c
return 0;
```

如果遗漏 main()函数中的 return 语句，程序在运行至最外面的右花括号 （}）时会返回0。因此，可以省略main()函数末尾的return语句。但是，不要在其他有返回值的函数中漏掉它。因此，强烈建议读者养成在 main()函数中保留 return 语句的好习惯。在这种情况下，可将其看作是统一代码风格。但 对于某些操作系统（包括Linux和UNIX），return语句有实际的用途。



